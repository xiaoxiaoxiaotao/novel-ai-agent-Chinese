"""
存储所有用于故事生成的prompt模板
"""

from typing import Dict

THEME_ANALYSIS_PROMPT = """作为一位深刻的文学分析家，请从提供的故事提示中提炼出核心主题和哲学思考。
要求：
1. 每个主题必须以简洁的一句话表达
2. 主题应该包含：
   - 核心矛盾（如人性与科技的冲突）
   - 伦理困境（如个人利益与集体利益的选择）
   - 哲学思考（如存在主义、自由意志等）
3. 确保主题与故事提示紧密相关
4. 每个主题都要有现实意义和普遍性

请严格按照以下格式返回3-5个主题：
1. [第一个主题]
2. [第二个主题]
3. [第三个主题]
...
"""

CHARACTER_DESIGN_PROMPT = """作为一位角色设计大师，请创建一个复杂的角色关系网。要求：

1. 主要角色（至少10个）：
   A. 主角：
      - 基本设定（身份背景、性格特点）
      - 成长轨迹（每阶段的变化）
      - 核心能力（战斗特色、独特技能）
      - 关键道具（玉佩等重要物品）
   
   B. 各阶段BOSS（5个）：
      - 身份背景和实力
      - 与主角的对立点
      - 掌握的特殊能力
      - 背后的势力
      - 与真相的关联
   
   C. 重要盟友（至少4个）：
      - 与主角的相遇契机
      - 独特的能力特点
      - 性格和行为模式
      - 对主角的帮助
      - 个人的故事线

2. 次要角色（至少30个）：
   A. 宗门人物（至少10个）：
      - 长老、师兄师姐
      - 对手和竞争者
      - 暗中帮助者
   
   B. 各方势力人物（至少10个）：
      - 其他宗门高手
      - 神秘组织成员
      - 江湖势力首领
   
   C. 普通配角（至少10个）：
      - 商人、镖师
      - 普通百姓
      - 关键线索提供者

3. 角色关系网：
   A. 明面关系：
      - 师徒关系
      - 朋友关系
      - 对手关系
   
   B. 隐藏关系：
      - 血缘联系
      - 过往恩怨
      - 势力归属
   
   C. 动态关系：
      - 敌人转盟友
      - 盟友变对手
      - 身份反转

4. 每个阶段的人物配置：
   第一阶段：
   - 本阶段BOSS：xxx（特点、实力）
   - 新登场盟友：xxx（特点、作用）
   - 重要配角：xxx（特点、关系）
   
   第二阶段：
   [类似结构，依次类推...]

5. 注意事项：
   - 每个角色要有独特性格
   - 安排合理的实力层级
   - 设计复杂的人际关系
   - 为后续反转埋伏笔
   - 主要角色要有成长空间
"""

STORY_OUTLINE_PROMPT = """作为一位优秀的故事架构师，请设计一个结构完整的长篇故事大纲。要求：

1. 整体结构设计（硬性要求）：
   - 分为5个阶段，每阶段10章，共50章
   - 每个阶段设置一个最终BOSS
   - 每阶段引入新的盟友和对手
   - 逐步揭示更大的阴谋

2. 每阶段设计要求：
   第一阶段（1-10章）- 初入修行：
   - 发现火焰能力
   - 进入宗门历练
   - 结识初始同伴
   - 对抗第一个BOSS
   - 获得重要线索

   第二阶段（11-20章）- 实力提升：
   - 新的修炼体系
   - 结识高阶盟友
   - 经历重要考验
   - 击败新的BOSS
   - 揭示更大阴谋

   第三阶段（21-30章）- 真相显现：
   - 身世之谜浮现
   - 新的能力觉醒
   - 盟友阵营扩大
   - 挑战强大BOSS
   - 发现惊天秘密

   第四阶段（31-40章）- 势力对抗：
   - 各方势力汇聚
   - 朋友敌人反转
   - 关键秘密揭晓
   - 决战阶段BOSS
   - 准备最终一战

   第五阶段（41-50章）- 终极决战：
   - 集结所有力量
   - 真相完全揭露
   - 终极BOSS现身
   - 最后的大决战
   - 完美的结局

3. 每章要求：
   - 字数：不少于2500字
   - 包含具体时间地点
   - 明确的情节推进
   - 人物互动丰富
   - 为后续铺垫

4. 爽点设计：
   - 每章都有精彩战斗或反转
   - 实力提升要循序渐进
   - 设置合理的打脸情节
   - 制造期待和悬念
   - BOSS战要出人意料

5. 注意事项：
   - 每个阶段都要有明确目标
   - 各条线索要环环相扣
   - BOSS难度要递进提升
   - 盟友要适时帮助
   - 为反转预留空间
"""

CONTENT_CREATION_SYSTEM_PROMPT = """你是一位擅长创作爽文的小说家，特别注重通过情节反转和人物逆袭来制造震撼效果。创作要求：

1. 情节设计（重要性排序）：
   - 反转与震撼（35%）：
     * 出人意料的能力展现
     * 身份地位的突然转变
     * 打脸装逼打击对手
     * 令众人震惊的场面
     * 意想不到的剧情转折
   
   - 期待与升级（35%）：
     * 能力的不断提升
     * 资源的持续积累
     * 身份地位的逐步提高
     * 真相的逐步揭露
     * 为下一个高潮铺垫

   - 场景描写（20%）：
     * 震撼性的场面描绘
     * 众人反应的细节
     * 气氛的渲染烘托
     * 环境与情节的呼应

   - 对话设计（10%）：
     * 犀利的对话交锋
     * 有力的反击台词
     * 装逼打脸的金句
     * 引发期待的暗示

2. 爽感营造技巧：
   - 反转设计：
     * 表面平淡下的实力隐藏
     * 关键时刻的能力爆发
     * 身份地位的突然揭露
     * 局势的戏剧性逆转
   
   - 升级节奏：
     * 循序渐进的实力提升
     * 一波接一波的打脸
     * 层层递进的矛盾升级
     * 不断加码的奖励收获

3. 人物塑造：
   - 主角特点：
     * 智商在线，有谋略
     * 能力突出，有亮点
     * 隐藏实力，有底牌
     * 进步神速，有潜力
   
   - 配角设计：
     * 对手要够嚣张跋扈
     * 路人要有震惊反应
     * 支持者要适时现身
     * 反派要有实力威胁

4. 情节节奏：
   - 高潮设计：
     * 实力展现要震撼
     * 打脸场面要痛快
     * 反转剧情要意外
     * 升级奖励要给力
   
   - 铺垫过渡：
     * 为反转做好铺垫
     * 为升级预留空间
     * 为打脸设置情境
     * 为高潮做好准备

5. 注意事项：
   - 反转要有合理性
   - 升级要有阶段感
   - 打脸要有快感
   - 期待要有延续性
   - 避免过度夸张
"""

def get_chapter_content_prompt(meta_info: Dict, chapter_synopsis: str, chapter_num: int) -> str:
    """生成具体章节内容的prompt"""
    return f"""作为小说创作者，请基于以下信息创作第{chapter_num}章的具体内容。

小说基本信息：
1. 标题：{meta_info['title']}
2. 主题：{meta_info['theme']}
3. 世界观设定：
{meta_info['setting']}

4. 主要人物：
{meta_info['characters']}

5. 写作基调：
{meta_info['tone']}

本章信息：
1. 章节标题：{meta_info['chapters'][chapter_num-1]['title']}
2. 本章梗概：
{chapter_synopsis}

写作要求：
1. 字数控制在2500字左右
2. 场景描写要具体，注意细节
3. 对话要自然，展现人物性格
4. 情节发展要符合人物性格和故事逻辑
5. 要有适当的悬念和铺垫
6. 注意与前后章节的连贯性
7. 符合整体的写作基调

请创作本章的具体内容。
"""

SECTION_TITLE_PROMPT = """请为这个故事的五个主要部分生成富有诗意和象征意义的标题。每个标题要：
1. 简洁有力（2-3个字）
2. 与内容相呼应
3. 有意象和象征
4. 能反映情节发展
5. 前后有关联性

已知五个部分的主要内容：
1. 起因部分：介绍背景、人物、引发事件
2. 经过部分：矛盾初显、关系交织
3. 发展部分：冲突加剧、形势恶化
4. 高潮部分：终极对决、重大转折
5. 结局部分：问题解决、回归平静

请按照以下格式返回：
{
    "起因": "《标题》",
    "经过": "《标题》",
    "发展": "《标题》",
    "高潮": "《标题》",
    "结局": "《标题》"
}
"""

TITLE_GENERATION_PROMPT = """作为一位专业的小说标题设计师，请为这个故事创作一个引人注目的标题。要求：

1. 标题要：
   - 简洁有力（不超过10个字）
   - 富有诗意和想象力
   - 体现故事的核心主题
   - 引发读者好奇
   - 暗示故事的基调

2. 同时提供：
   - 中文标题
   - 英文标题（如果适用）
   - 副标题（可选）

请按照以下格式返回：
{
    "main_title": "主标题",
    "sub_title": "副标题（可选）",
    "english_title": "English Title"
}
"""

SETTING_GENERATION_PROMPT = """作为一位世界观构建大师，请为这个故事创建详细的背景设定。要求：

1. 时间背景：
   - 具体年代或时期
   - 重要的历史事件或背景
   - 社会发展阶段

2. 地理环境：
   - 具体地点描述
   - 环境特征
   - 气候条件
   - 标志性场所

3. 社会背景：
   - 社会制度
   - 科技水平
   - 文化特征
   - 主要矛盾

4. 特殊元素：
   - 独特的设定
   - 重要的道具或系统
   - 世界运行规则

请以散文形式详细描述以上各个方面，确保前后连贯，细节丰富。
"""

DIALOGUE_GENERATION_PROMPT = """作为对话写作专家，请创作生动的对话场景。要求：

1. 对话要求：
   - 展现人物性格
   - 推动情节发展
   - 制造戏剧冲突
   - 揭示人物关系
   - 埋设关键信息

2. 对话技巧：
   - 个性化的说话方式
   - 适当的动作描写
   - 自然的语气语调
   - 暗示和潜台词
   - 节奏的控制

3. 场景描写：
   - 环境氛围
   - 人物表情
   - 肢体语言
   - 细节刻画
"""

PACING_CONTROL_PROMPT = """作为节奏掌控大师，请设计故事的节奏安排：

1. 总体节奏：
   - 开端：徐缓铺陈
   - 发展：逐步加快
   - 高潮：紧张激烈
   - 结局：舒缓回落

2. 场景节奏：
   - 重要场景详写
   - 过渡场景略写
   - 紧张与舒缓交替
   - 适时留白

3. 情节推进：
   - 悬念的设置
   - 冲突的递进
   - 高潮的预设
   - 结局的伏笔
"""

CHAPTER_SYNOPSIS_PROMPT = """作为一位故事规划大师，请根据已生成的目录，为每个章节创作详细的梗概。要求：

1. 内容要求：
   - 每个章节的梗概要包含完整的情节发展
   - 明确的时间、地点和场景转换
   - 具体的人物行动和互动
   - 重要的对话和心理描写
   - 与整体故事的关联

2. 结构要求：
   - 每个章节的梗概约300-500字
   - 要有清晰的起承转合
   - 要体现章节主题
   - 要为具体写作预留发挥空间

3. 连贯性要求：
   - 前后章节要紧密联系
   - 人物形象要连贯
   - 情节发展要合理
   - 伏笔和悬念要统一布局

4. 节奏要求：
   - 把控整体故事节奏
   - 安排情节的轻重缓急
   - 设计高潮和转折点
   - 注意场景的切换节奏

已有目录：
{chapter_titles}

请按以下格式输出所有章节的梗概：

【第一章：xxx】
[详细梗概，包含时间地点、人物行动、关键对话等]

【第二章：xxx】
[详细梗概]

...

注意：
1. 所有章节的梗概要在一次生成中完成，确保整体连贯
2. 每个梗概要为后续写作提供足够的细节
3. 要体现故事的整体节奏和主题
4. 为每个章节预设合理的冲突和转折
"""

TONE_ANALYSIS_PROMPT = """作为一位文学风格分析专家，请分析这个故事应该采用的基调。要求：

1. 确定整体写作风格：
   - 叙事语气（如：热血、冷静、幽默等）
   - 情感色彩（如：温暖、压抑、激昂等）
   - 表达方式（如：直白、含蓄、夸张等）

2. 分析适合的写作手法：
   - 描写方式
   - 对话风格
   - 节奏控制
   - 氛围营造

请用简洁的语言描述故事的基调，确保与主题和内容相匹配。
""" 